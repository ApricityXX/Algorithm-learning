# 差分

**应用：对某段数组进行加减操作**

差分即前缀和的逆过程

参考 https://www.acwing.com/solution/content/26588/

#### 差分数组：

首先给定一个原数组
$$
a：a[1], a[2], a[3],,,,,, a[n];
$$
然后我们构造一个数组
$$
b ： b[1] ,b[2] , b[3],,,,,, b[i];
$$
使得
$$
a[i] = b[1] + b[2 ]+ b[3] +,,,,,, + b[i]
$$
也就是说，a数组是b数组的前缀和数组，反过来我们把b数组叫做a数组的差分数组。换句话说，每一个a[i]都是b数组中从头开始的一段区间和。

考虑如何构造差分b数组？

最为直接的方法

如下：

$$
a[0 ]= 0;

b[1] = a[1] - a[0];

b[2] = a[2] - a[1];

b[3] =a [3] - a[2];

........

b[n] = a[n] - a[n-1]
$$

#### 例题如下：

输入一个长度为 n 的整数序列。

接下来输入 m 个操作，每个操作包含三个整数 l,r,c,，表示将序列中 [l,r][�,�] 之间的每个数加上 c

请你输出进行完所有操作后的序列。

#### 输入格式

第一行包含两个整数 n 和 m。

第二行包含 n 个整数，表示整数序列。

接下来 m 行，每行包含三个整数 l，r，c，表示一个操作。

```cpp
#include<bits/stdc++.h>
using namespace std;
const int N = 1e5+10;
int a[N],b[N];
int main(){
    int n,m;
    int l,r,c;
    cin>>n>>m;
    for(int i = 1;i<=n;i++) {
        cin>>a[i];
        b[i]=a[i]-a[i-1];  //求差分数组
    }
    

    while(m--){
        cin>>l>>r>>c;
        b[l]+=c;     //左边界+
        b[r+1]-=c;   //右边界 右边一个-c。抵消
        
    }
    for(int i = 1;i<=n;i++){
        b[i]=b[i]+b[i-1];    //重新构建前缀和
        cout<<b[i]<<" ";
    }



    return 0;

}
```

